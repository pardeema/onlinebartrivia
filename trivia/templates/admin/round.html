{% extends "base.html" %}
{% block home_nav %}
      <li class="nav-item active">
        <a class="nav-link" href="{% url 'admin' %}">Admin Home <span class="sr-only">(current)</span></a>
      </li>
	  <li class="nav-item active">
        <a class="nav-link" href="{% url 'game_details' game.password %}">Game Home <span class="sr-only">(current)</span></a>
      </li>
{% endblock home_nav %}
{% block content %}

<h1>{{ game.name }} - {{game.date}}</h1>
<h2>Game ID: {{game.password}}</h2>

<h3><b>Round #{{round.round_num}}</b> - {{round.round_name}}</h3>
	{%if round.url %}
		<p>URL For Supplemental material: <a href="{{round.url}}" target=_blank>Click Here</a></p> 
	{%endif %}

<div class="row">
	<div class="col"> 
		<a href="{%url 'score' game.password round.round_num %}"><button class="btn btn-primary btn-lg">Score Round</button></a><br><br>
	</div>
</div>
<div class="row">
	<div class="col">
		<a href="{%url 'game_details' game.password %}"><button class="btn btn-primary">Back to Game</button></a>
	</div>
</div><br>

<hr>
<h1>Previously Scored Answers</h1>
{% for team in team_answers %}
    {%for name in team%}
        
        <h2><u>Team:</u> {{name}}</h2>
    <form method="POST" action="{%url 'edit_score' game.password round.round_num %}">
        {% csrf_token %}
        <input type="hidden" name="team" value="{{name}}">
    {%endfor%}
        <table class="table table-bordered table-sm table-hover">
        {%for answers in team.values%}
            {%for a in answers%}
                {% if a.scored %}
                    <tr>
                        <td class="center table-dark" colspan="4"><b>Question #{{a.question.question_num}}: {{a.question.question}}</b></td>
                    </tr>
                    <tr>
                        <th>Answer Key</th>
                        <th>{{a.team.name}} Answer</th>
                        <th>Correct?</th>
                        <th>Update Points</th>
                    </tr>
                    <tr>
                        <td class="center">{{a.question.answer}}</td> 
                        <td class="center">{{a.answer}}</td>
                        <td class="center"><input type="checkbox" id="check{{a.question.question_num}}" name="a{{a.question.question_num}}_correct" {%if a.correct %}checked {%endif%}></td>
                        <td class="center"><input type="text" name="a{{a.question.question_num}}" id="points{{a.question.question_num}}" value="{{a.points}}" size=2></td>
                    </tr>
                    
                    <!-- Script issues <script>
                        $(document).ready(function(){

                            $("#check{{a.question.question_num}}").click(function(){

                                $("#points{{a.question.question_num}}").val("1");

                            });

                    
                        });
                        </script>-->

                    <!--TODO: Add JS to hide names of scored teams -->
                {%endif%}
            {%endfor%}
                <tr>
                    <td class="center" colspan="4">
                        <label><input type="checkbox" id="confirm_{{answer.1.team.name}}" required>
                        Submit score?</label>
                            <input type="submit" value="Submit Scoring">      
                    </td>
                </tr>
            </table>
            </form>
        {%endfor%}
        <hr><br>
{%endfor%}
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
td.center {
  text-align:center;
}
</style>


{% endblock content %}
